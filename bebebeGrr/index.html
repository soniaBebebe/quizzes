<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini-School (Ollama)</title>
  <style>
    :root { --border:#ddd; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; padding:16px; }
    header { display:flex; gap:12px; align-items:center; justify-content:space-between; }
    nav { display:flex; gap:8px; flex-wrap:wrap }
    .row { display:flex; gap:8px; flex-wrap:wrap; align-items:center }
    .muted { opacity: .75; font-size: .9em }
    .cfg input, .cfg select { padding:6px 8px }
    .cfg .inline { display:flex; gap:6px; flex-wrap:wrap; align-items:center }
    .cfg .sep { width:100%; height:1px; background:var(--border); margin:6px 0 }
    .cardscontainer .card { cursor:pointer; padding:16px; border:1px solid var(--border); border-radius:8px; width:220px; text-align:center }
    .progress{ display:flex; gap:8px; align-items:center }
    .bar{ height:6px; background:#6aa3; width:0 }
    .counter,.timer{ font-family:monospace }
    .btn, .button-bebebe, button { cursor:pointer; padding:8px 12px; border:1px solid var(--border); border-radius:8px; background:#f7f7f7 }
    .button-bebebe:hover, .btn:hover { background:#eee }
    .topicllm, .countllm, .diffllm { padding:6px 8px }
    section { display:none }
    section.active { display:block }
    .heading { margin:16px 0 8px; }
  </style>
</head>
<body>
  <header>
    <div class="row">
      <h1 style="margin:0;">Mini-School (Ollama)</h1>
      <nav>
        <button onclick="showSection('articles')">Articles</button>
        <button onclick="showSection('quiz')">Quizzes</button>
        <button onclick="showSection('cards')">Cards</button>
      </nav>
    </div>
    <button id="themeToggle" class="btn themebtn">Theme</button>
  </header>

  <main>
    <section id="articles" class="active">
      <h2 class="heading">Articles</h2>
      <article>
        <h3>Что такое алгоритм?</h3>
        <p>Алгоритм — пошаговое описание действий для решения задачи.</p>
      </article>
      <article>
        <h3>HTML Basics</h3>
        <p>HTML — язык разметки, создаёт структуру страницы.</p>
      </article>
    </section>

    <section id="quiz">
      <h2 class="heading">Mini-test</h2>

      <!-- Конфиг OLLAMA -->
      <div class="cfg" style="margin:10px 0 16px;">
        <div class="row inline">
          <label><b>Ollama:</b></label>
          <input id="ollamaBase" placeholder="http://localhost:11434" size="32" />
          <input id="ollamaModel" placeholder="qwen2.5:0.5b | llama3.1:8b" size="28" />
          <button id="saveOllamaCfg">Save</button>
        </div>
        <div class="sep"></div>
        <div class="muted">
          Важно: запусти <code>ollama serve</code> с CORS для Live Server, напр.:
          <br/>Windows PowerShell:
          <code>$env:OLLAMA_ORIGINS="http://127.0.0.1:5500,http://localhost:5500"; $env:OLLAMA_HOST="127.0.0.1:11434"; ollama serve</code>
          <br/>macOS/Linux:
          <code>export OLLAMA_ORIGINS="http://127.0.0.1:5500,http://localhost:5500"; export OLLAMA_HOST="127.0.0.1:11434"; ollama serve</code>
        </div>
      </div>

      <div class="progress">
        <div id="quizBar" class="bar"></div>
        <span id="quizCount" class="counter">0/0</span>
        <span id="quizTimer" class="timer">00:00</span>
      </div>

      <div id="quiz-container" style="margin-top:10px;"></div>

      <div class="actions" style="margin-top:10px;">
        <button id="btnStart" class="button-bebebe">Start quiz!</button>
        <button id="btnNext" class="btn btnnext" disabled>Next</button>
        <span id="bestScore" class="muted"></span>
      </div>

      <div class="actions" style="margin-top:24px; display:flex; gap:6px; flex-wrap:wrap;">
        <input id="llmTopic" placeholder="Theme (e.g. HTML/CSS/JS)" class="topicllm" />
        <select id="llmCount" class="countllm"><option>5</option><option>8</option><option>10</option></select>
        <select id="llmDiff" class="diffllm">
          <option value="easy">easy</option>
          <option value="medium">medium</option>
          <option value="hard">hard</option>
        </select>
        <button id="btnLLM" class="btngenerate">Generate via AI</button>
        <span id="llmStatus" class="muted llmstatusupdates"></span>
      </div>
    </section>

    <section id="cards">
      <h2 class="heading">Cards with words</h2>
      <div id="card-container" class="cardscontainer"></div>
      <button onclick="nextCard()" class="button-bebebe">Next Card</button>
    </section>
  </main>

  <script src="script.js" type="module"></script>
</body>
</html>
